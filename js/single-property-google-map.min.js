jQuery(function(e){"use strict";if("undefined"!=typeof houzez_single_property_map){if(e("#houzez-single-listing-map").length<=0)return;var a,i=0,t=0,s=15,n=null,p="",l=!1,r="",m="marker",o="",d="no",c="roadmap";if("undefined"!=typeof houzez_map_options){if(r=houzez_map_options.closeIcon,o=houzez_map_options.infoWindowPlac,d=houzez_map_options.markerPricePins,c=houzez_map_options.map_type,m=houzez_map_options.map_pin_type,p=houzez_map_options.googlemap_stype,0==(t=houzez_map_options.show_map))return;"circle"==m&&(l=!0),houzez_map_options.single_map_zoom>0&&(s=parseInt(houzez_map_options.single_map_zoom)),""!=p&&(p=JSON.parse(p))}var g=new google.maps.LatLng(houzez_single_property_map.lat,houzez_single_property_map.lng),y={center:g,zoom:s,disableDefaultUI:!1,scrollwheel:!1},f={position:g,pov:{heading:34,pitch:10}};switch(c){case"hybrid":y.mapTypeId=google.maps.MapTypeId.HYBRID;break;case"terrain":y.mapTypeId=google.maps.MapTypeId.TERRAIN;break;case"satellite":y.mapTypeId=google.maps.MapTypeId.SATELLITE;break;default:y.mapTypeId=google.maps.MapTypeId.ROADMAP}if(a=new google.maps.Map(document.getElementById("houzez-single-listing-map"),y),e(".houzezMapType").on("click",function(i){var t;i.preventDefault(),"roadmap"===(t=e(this).data("maptype"))?a.setMapTypeId(google.maps.MapTypeId.ROADMAP):"satellite"===t?a.setMapTypeId(google.maps.MapTypeId.SATELLITE):"hybrid"===t?a.setMapTypeId(google.maps.MapTypeId.HYBRID):"terrain"===t&&a.setMapTypeId(google.maps.MapTypeId.TERRAIN)}),document.getElementById("listing-mapzoomin")&&($=a,google.maps.event.addDomListener(document.getElementById("listing-mapzoomin"),"click",function(){var e=parseInt($.getZoom(),10);console.log(e),++e>20&&(e=20),$.setZoom(e)})),document.getElementById("listing-mapzoomout")&&(z=a,google.maps.event.addDomListener(document.getElementById("listing-mapzoomout"),"click",function(){var e=parseInt(z.getZoom(),10);console.log(e),--e<0&&(e=0),z.setZoom(e)})),google.maps.event.addListener(a,"tilesloaded",function(){jQuery(".houzez-map-loading").hide()}),e('a[href="#pills-street-view"]').on("shown.bs.tab",function(){(i+=1)<=1&&(n=new google.maps.StreetViewPanorama(document.getElementById("pills-street-view"),f))}),l&&(k=a,new google.maps.Circle({strokeColor:"#4f5962",strokeOpacity:.8,strokeWeight:2,fillColor:"#4f5962",fillOpacity:.35,map:k,center:g,radius:300})),!l){if("yes"==d)var u='<div data-id="'+houzez_single_property_map.property_id+'" class="gm-marker gm-marker-color-'+houzez_single_property_map.term_id+'"><div class="gm-marker-price">'+houzez_single_property_map.pricePin+"</div></div>",v=new RichMarker({map:a,position:g,draggable:!1,flat:!0,anchor:RichMarkerPosition.MIDDLE,content:u});else{var I=houzez_single_property_map.marker,h=new google.maps.Size(44,56);window.devicePixelRatio>1.5&&houzez_single_property_map.retinaMarker&&(I=houzez_single_property_map.retinaMarker,h=new google.maps.Size(44,56));var T={url:I,size:h,scaledSize:new google.maps.Size(44,56)},v=new google.maps.Marker({position:g,map:a,icon:T,animation:google.maps.Animation.DROP})}var w=document.createElement("div");w.className="map-info-window";var M="";M+='<div class="item-wrap">',M+='<div class="item-header">',houzez_single_property_map.thumbnail?M+='<a class="hover-effect"><img class="img-fluid listing-thumbnail" src="'+o+'" data-src="'+houzez_single_property_map.thumbnail+'" alt="'+houzez_single_property_map.title+'"/></a>':M+='<a class="hover-effect"><img class="img-fluid listing-thumbnail" src="'+o+'" alt="'+houzez_single_property_map.title+'"/></a>',M+="</div>",M+='<div class="item-body flex-grow-1">',M+='<h2 class="item-title">',M+="<a>"+houzez_single_property_map.title+"</a>",M+="</h2>",M+='<ul class="list-unstyled item-info">',houzez_single_property_map.price&&(M+='<li class="item-price">'+houzez_single_property_map.price+"</li>"),houzez_single_property_map.property_type&&(M+='<li class="item-type">'+houzez_single_property_map.property_type+"</li>"),M+="</ul>",M+="</div>",M+="</div>",w.innerHTML=M;var $,z,k,b,E,L,_=new google.maps.InfoWindow({content:w});b=a,E=v,L=_,google.maps.event.addListener(E,"click",function(){L.open(b,E);var e=L.getContent().getElementsByClassName("listing-thumbnail");e.length&&e[0].dataset.src&&(e[0].src=e[0].dataset.src)})}}});